(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{528:function(t,a,s){"use strict";s.r(a);var e=s(4),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概念"}},[t._v("#")]),t._v(" 概念")]),t._v(" "),s("ul",[s("li",[t._v("流程\n"),s("ul",[s("li",[t._v("就是通过计算机对业务流程进行自动化管理，实现多个参与者按照"),s("strong",[t._v("预定义")]),t._v("的流程去自动执行业务流程")])])]),t._v(" "),s("li",[t._v("流程模型\n"),s("ul",[s("li",[t._v("使用流程设计器定义好流程图保存后为流程模型，生成BPMN文件.")]),t._v(" "),s("li",[t._v("部署发布后，生成流程部署和流程定义，两者一一对应。")]),t._v(" "),s("li",[t._v("可重复部署，但生成的流程定义Key相同，版本号不同。推荐只部署一次。")])])]),t._v(" "),s("li",[t._v("流程部署\n"),s("ul",[s("li",[t._v("仅仅做为流程已部署可用的记录。")])])]),t._v(" "),s("li",[t._v("流程定义：\n"),s("ul",[s("li",[t._v("可根据定义Key发起流程实例后，关联最新版本的流程定义。")]),t._v(" "),s("li",[t._v("可根据主键id发起流程实例，不推荐。")]),t._v(" "),s("li",[t._v("可控制状态激活或挂起，影响所有发起的流程实例。")]),t._v(" "),s("li",[t._v("可逆向转为流程模型。")])])]),t._v(" "),s("li",[t._v("流程实例")]),t._v(" "),s("li",[t._v("根据流程定义的key发起后，生产一个运行实例和历史实例。")]),t._v(" "),s("li",[t._v("运行实例间不影响。走完流程，运行实例自动删除。")]),t._v(" "),s("li",[t._v("运行实例可控制激活或挂起。")]),t._v(" "),s("li",[t._v("历史实例：一直保留，除非手动删除。")]),t._v(" "),s("li",[t._v("节点任务\n"),s("ul",[s("li",[t._v("流程图中的节点任务userTask")]),t._v(" "),s("li",[t._v("当前和历史的节点任务")]),t._v(" "),s("li",[t._v("当前和历史的节点任务参与者（用户或组）")])])]),t._v(" "),s("li",[t._v("流程变量\n"),s("ul",[s("li",[t._v("流程图中的事件、任务或其他额外变量信息")])])]),t._v(" "),s("li",[t._v("流程事件")]),t._v(" "),s("li",[t._v("网关\n"),s("ul",[s("li",[t._v("流程图设计器中需要使用的组件")]),t._v(" "),s("li",[t._v("排他网关，分支选一，进入下个节点任务")]),t._v(" "),s("li",[t._v("并行网关，分支并发进行，所有分支执行结束后，进入下个节点任务")]),t._v(" "),s("li",[t._v("包含网关，排他和并行结合，部分分支符合条件才可执行，所有分支执行结束，进入下个节点任务")])])]),t._v(" "),s("li",[t._v("定时器")])]),t._v(" "),s("h2",{attrs:{id:"_25张表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_25张表"}},[t._v("#")]),t._v(" 25张表")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("表名")]),t._v(" "),s("th",{staticStyle:{"text-align":"right"}},[t._v("中文意思")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("Qty")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("act_evt_log")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("事件日志表")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("5")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("act_ge_bytearray")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("流程文件存储表")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("12")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("act_ge_property")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("系统属性生成表")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("234")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("act_hi_actinst")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("历史活动表")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("234")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("act_hi_attachment")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("历史附件表")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("234")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("act_hi_comment")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("历史建议表")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("234")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("act_hi_detail")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("历史流程变量转化详细信息表")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("234")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("act_hi_identitylink")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("历史节点任务参与者表")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("234")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("act_hi_procinst")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("历史流程实例表")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("234")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("act_hi_taskinst")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("历史节点任务表")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("234")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("act_hi_varinst")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("历史流程变量表")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("234")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("act_id_group")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("用户组表")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("234")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("act_id_info")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("用户扩展信息表")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("234")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("act_id_membership")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("用户-组关联表")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("234")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("act_id_user")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("用户表")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("234")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("act_procdef_info")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("流程定义扩展信息表")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("234")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("act_re_deployment")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("流程部署表")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("234")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("act_re_model")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("流程模型表")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("234")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("act_re_procdef")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("流程定义表")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("234")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("act_ru_event_subscr")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("当前流程事件表")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("234")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("act_ru_execution")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("当前审批堆栈表，包括网关这些节点")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("234")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("act_ru_identitylink")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("当前节点任务参与者表")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("234")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("act_ru_job")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("当前定时任务表")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("234")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("act_ru_task")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("当前审批堆栈表中的任务节点记录")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("234")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("act_ru_variable")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("当前流程变量表")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("234")])])])]),t._v(" "),s("blockquote",[s("p",[t._v("备注： 当前相关表记录，在当前XX结束后自动删除")]),t._v(" "),s("p",[t._v("表字段说明"),s("a",{attrs:{href:"https://www.devdoc.cn/activiti-table-act_ru_execution.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考文档"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"接口调用流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#接口调用流程"}},[t._v("#")]),t._v(" 接口调用流程")]),t._v(" "),s("ol",[s("li",[t._v("创建模型")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("即创建bpmn文件，简称【流程图】\n获取modelId, 访问编辑器【/modeler.html?modelId=】，编辑流程图并保存\n【流程图】以下参数存储在Variables对象中\n\t必填属性\n\t\t1. 总信息：流程ID（Process Identitifer）、名称（Name）、说明（Documentation）\n\t\t2. 开始事件：设置发起人（），本项目参数名固定为【applyUserId】，格式${applyUserId}\n\t\t3. 用户任务：设置代理人（Assignments）或候选人或组，必须是已同步到工作流数据库中的用户\n\t\t4. 判断事件：设置判断参数（），本项目参数名固定为【passFlag】, 格式${passFlag}，否为${!passFlag}\n\t\t5. 结束\n\t可选属性\n保存后填写模型信息，获得Model对象\n关键属性\n\t流程ID（Process Identitifer），部署后变为【流程key】ProcessDefinitionKey\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("部署模型")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("【流程图】转为xml文件和png图片，简称【流程文件】主要是xml文件\n根据【流程文件】部署获得Deployment【流程部署】对象。即可直接部署写死的【流程文件】\n关键属性\n\t【流程key】作为启动流程实例绑定用的属性\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("发布流程")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("更新状态，并生成【流程定义】ProcessDefinition\n 一个【流程部署】可发布成多个【流程定义】，重复发，生成的【流程key】相同，版本不同，启动实例选最新的版本\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("ol",{attrs:{start:"4"}},[s("li",[t._v("启动流程")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("根据【流程key】、业务ID（BusinessKey）、自定义参数（Variables）启动流程得到【流程实例】对象ProcessInstance\n设置当前启动人员ID：identityService.setAuthenticatedUserId（用户ID）\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("ol",{attrs:{start:"5"}},[s("li",[t._v("查询待办")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("根据用户ID查询taskService.createTaskQuery().taskCandidateOrAssigned\n获得业务任务Task对象\n根据相关ID，获取当前任务对应的ProcessInstance、ProcessDefinition\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("ol",{attrs:{start:"6"}},[s("li",[t._v("签收任务")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("通过Task的id和用户id，签收任务\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ol",{attrs:{start:"7"}},[s("li",[t._v("完成任务")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("通过Task的id和流程图中设置的自定义参数Variables，完成任务\nVariables比如A=true，同意进入下一步；A=false，不同意进入分支\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("blockquote",[s("p",[t._v("进入下个阶段，重复【5、6、7】\n下个阶段5查询到的Task为新对象")])]),t._v(" "),s("h2",{attrs:{id:"开源项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开源项目"}},[t._v("#")]),t._v(" 开源项目")]),t._v(" "),s("h3",{attrs:{id:"agilebpm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#agilebpm"}},[t._v("#")]),t._v(" "),s("a",{attrs:{href:"http://www.agilebpm.cn/zh-cn/docs/integration.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("AgileBPM"),s("OutboundLink")],1)]),t._v(" "),s("h4",{attrs:{id:"设计思路"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设计思路"}},[t._v("#")]),t._v(" 设计思路")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("监听器接口设计")]),t._v(" "),s("ol",[s("li",[t._v("全局事件监听器接口：根据监听acitivit引擎的操作事件来触发自定义事件")]),t._v(" "),s("li",[t._v("抽象监听器接口\n"),s("ul",[s("li",[t._v("流程实例抽象类\n"),s("ul",[s("li",[t._v("实例创建")]),t._v(" "),s("li",[t._v("实例结束")])])]),t._v(" "),s("li",[t._v("流程任务抽象类\n"),s("ul",[s("li",[t._v("任务创建")]),t._v(" "),s("li",[t._v("任务结束")])])]),t._v(" "),s("li",[t._v("流程发起")]),t._v(" "),s("li",[t._v("流程完成")]),t._v(" "),s("li",[t._v("流程取消")]),t._v(" "),s("li",[t._v("连线创建")]),t._v(" "),s("li",[t._v("定时执行")])])])]),t._v(" "),s("details",{staticClass:"custom-block details"},[s("summary",[t._v("【示例】任务抽象类，定义任务的执行流程")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("notify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ActivitiEvent")]),t._v(" event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ActivitiEntityEvent")]),t._v(" entityEvent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ActivitiEntityEvent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TaskEntity")]),t._v(" taskEntity "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TaskEntity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" entityEvent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEntity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TaskEntity对象转为DefaultTaskActionCmd")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("T")]),t._v(" model "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getActionModel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("taskEntity"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 执行前置插件之前")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforePluginExecute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 触发前置插件")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBeforeTriggerEventType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("taskCommand"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("execute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBeforeTriggerEventType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 触发具体事件操作")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("triggerExecute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 触发后置插件")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAfterTriggerEventType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("taskCommand"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("execute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAfterTriggerEventType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 执行后置插件之后")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterPluginExecute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br")])])])]),t._v(" "),s("li",[s("p",[t._v("脚本接口设计")]),t._v(" "),s("ul",[s("li",[t._v("流程任务脚本接口")]),t._v(" "),s("li",[t._v("流程实例脚本接口")]),t._v(" "),s("li",[t._v("脚本执行接口")]),t._v(" "),s("li",[t._v("基础脚本抽象类")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://fastly.jsdelivr.net/gh/huhuhan/img@master/md/pic/20210304144541.png",alt:""}})])]),t._v(" "),s("li",[s("p",[t._v("脚本执行接口")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://fastly.jsdelivr.net/gh/huhuhan/img@master/md/pic/20210304145615.png",alt:""}})])]),t._v(" "),s("li",[s("p",[t._v("流程实例抽象类：实现类都是流程实例的脚本操作")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://fastly.jsdelivr.net/gh/huhuhan/img@master/md/pic/20210304145733.png",alt:""}})])]),t._v(" "),s("li",[s("p",[t._v("流程任务抽象类：实现类都是流程任务的脚本操作")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://fastly.jsdelivr.net/gh/huhuhan/img@master/md/pic/20210304150018.png",alt:""}})])])])])}),[],!1,null,null,null);a.default=n.exports}}]);